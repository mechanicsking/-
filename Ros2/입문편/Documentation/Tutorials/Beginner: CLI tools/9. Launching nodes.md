# Launching nodes
* 목표: 명령줄 도구를 사용하여 여러 노드를 한번에 실행할 수 있다.

## Background
대부분의 튜토리얼에서 새로운 터미널을 열때마다 새로운 노드를 매번 실행했었다. 더 많은 노드가 동시에 실행되는 복잡한 시스템을 만들수록 터미널을 열고 구성 세부사항을 다시 입력하는것은 귀찮아진다. 이때 실행 파일(Launch files)을 이용하면 ros2 노드를 포함하는 여러 실행 파일을 동시에 시작하고 구성할 수 있다. ros2 launch 커멘드를 사용하여 단일 launch file을 실행하면 모든 노드와 그 구성을 포함한 전체 시스템이 한번에 시작된다. 
## Tasks
### Running a Lauch File
새로운 터미널을 열어 다음 명령어를 실행한다.    
```
$ros2 launch turtlesim multisim.launch.py
```
이 명령은 multisim.launch.py라는 launch 파일을 사용하는 명령어이다.    
아래처럼 작성된 launch 파일이 실제로 실행되게 된다. 
```python
from launch import LaunchDescription
import launch_ros.actions

def generate_launch_description():
    return LaunchDescription([
        launch_ros.actions.Node(
            namespace='turtlesim1', package='turtlesim',
            executable='turtlesim_node', output='screen'),
        launch_ros.actions.Node(
            namespace='turtlesim2', package='turtlesim',
            executable='turtlesim_node', output='screen'),
    ])

```
코드설명     
LaunchDescription: 실행할 노드 목록을 담는 객체이다.      
launch_ros.actions.Node(...): 각각 하나의 turtlesim 노드를 생성한다. namespace='turtlesim1' 과 namespace='turtlesim2'로 두 개의 서로 다른 네임스페이스(즉, 이름공간)에서 turtlesim 노드를 두 번 띄운다.        
주의!- launch파일은 파이썬으로만 만드는 것이 아닌 XMA, YAML등 다양한 형식으로도 만들수 있다. 각 방식의 비교는 https://docs.ros.org/en/humble/How-To-Guides/Launch-file-different-formats.html 참조    
<img width="751" height="313" alt="image" src="https://github.com/user-attachments/assets/8d9aa291-5cbe-4bf6-94b2-f44fff724390" />

런치를 실행한 결과 다음과 같이 두개의 turtlesim 윈도우가 생성된다.    
<img width="994" height="860" alt="image" src="https://github.com/user-attachments/assets/9cb0a231-b15e-4ba1-b6e7-76c7a685e199" />      

런치 파일은 다음 튜토리얼에서 더 많은 정보를 찾을 수 잇다. https://docs.ros.org/en/humble/Tutorials/Intermediate/Launch/Launch-Main.html       

### (Optional) Control the Turtlesim Nodes
이미 런치 파일로 두 urtlesim 노드가 동시에 실행 중이므로, 각 노드는 일반 ros2노드처럼 개별적으로 제어할 수 있다. 예를 들어, turtle이 서로 반대방향으로 움직이도록 두 개의 새 터미널을 열고 따로 명령어를 내릴 수 있다.    
두번째 터미널에서 
```
$ros2 topic pub /turtlesim1/turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"
```
세번째 터미널에서 
```
$ros2 topic pub /turtlesim2/turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: -1.8}}"
```
위와 같이 각 노드에 따로 명령을 주면 거북이가 서로 반대방향으로 빙글빙글 돌며 움직이는 모습을 볼 수 있다.    
<img width="1732" height="537" alt="image" src="https://github.com/user-attachments/assets/e02690ec-51d2-488d-8d28-c7dadfb4e17d" />

## Summary
 지금까지의 핵심은, 하나의 명령어로 두 개의 turtlesim 노드를 동시에 실행했다는 것이다. 앞으로 직접 launch 파일을 작성하는 법을 배우면, ros2 launch 명령어를 활용해여러 노드를 한꺼번에 실행하는 것은 물론,각 노드의 설정도 한 번에 구성할 수 있게 된다. 
더 알기 위해선 다음의 튜토리얼을 참고하라 https://docs.ros.org/en/humble/Tutorials/Intermediate/Launch/Launch-Main.html 
