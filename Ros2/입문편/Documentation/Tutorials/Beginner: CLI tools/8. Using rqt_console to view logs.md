# Using rqt_console to view logs
* 목표: log message를 살펴보는 도구인 rqt_console의 사용방법을 알아본다.

## Background
rqt_console은 ros2에서 log message를 살펴보는데 사용하는 GUI 도구이다. 일반적으로, 로그 메시지는 터미널에 표시된다. rqt_console을 사용하면 시간이 지남에 따라 이러한 메시지를 수집하고, 자세히 보고, 더 체계적으로 보고, 필터링하고, 저장된 파일을 다시 로드하여 이후의 시간에 다시 살펴볼 수 있다. 노드는 로그를 사용하여 이벤트 및 상태에 관한 메시지를 다양한 방식으로 출력한다. 노드의 콘텐츠는 일반적으로 사용자를 위해 정보를 제공한다.      
## Tasks
### 1. Setup
새로운 터미널에서 다음의 커멘드를 통해 rqt_console을 실행한다. 
```
$ros2 run rqt_console rqt_console
```
rqt_console이 실행되면 다음의 화면이 띄어진다.     
<img width="889" height="553" alt="image" src="https://github.com/user-attachments/assets/573a2b57-8d22-493c-88cf-2083900d2c1e" />        

콘솔창의 첫번째 섹션은 시스템의 로그 메시지가 표시되는 곳이다.         
중간부분은 로그 메시지를 심각도(level)별로 필터링 할 수 있는 옵션이 있다. 예를 들어 DEBUG, INFO, WARN 등의 로그 레벨 중에서 특정레벨(예:DEBUG)은 보기 싫으면 제외 할 수 있다. 오른쪽에 있는 +버튼을 누르면 추가적인 제외 필터를 계속 만들어서 적용할 수 있다.         
아래쪽 영역은 입력한 특정 문자열이 포함된 메시지를 하이라이트하는데 사용된다. 이 하이라이트 영역에도 여러개의 문자열 필터를 계속 추가할 수 있다.      
이제 새로운 터미널에서 turtlesim을 실행해보자.    
### 2. Messages on rqt_console
rqt_console에서 볼 수 있는 log messages를 만들어내기 위해 거북이를 벽에 부딪히게 해서(예상되는 에러/경고가 발생하도록) 로그가 생성되게 할 것이다. 그렇기에 새로운 터미널에서 거북이에게 벽을 향해 움직이라는 명령을 내린다.      
```
$ros2 topic pub -r 1 /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0,y: 0.0,z: 0.0}}"
```
위의 명령어가 일정한 주기로 명령을 계속 보내고 있기에 turtle이 멈추지 않고 벽에 반복해서 부딪힌다. 이 상황에서 rqt_console을 켜 보면 같은 메시지(벽에 부딪혔다는 로그)가 Warn 레벨로 반복해서 표시되는 것을 볼 수 있다.    
<img width="1420" height="896" alt="image" src="https://github.com/user-attachments/assets/e4dad639-8b4d-48a5-95ab-50de03aa8228" />        

터미널에서 ctrl+c를 눌러 ros2 topic pub 커멘드를 멈추어 turtle이 벽으로 달리는 것을 멈춘다.    
### 3. Logger levels
ros2의 로그 레벨은 심각도에 따라 다음과 같이 나눈다.    
1. Fatal
2. Error
3. Warn
4. Info
5. Debug

각 로그 레벨이 정확히 무엇을 의미하는지에 대한 표준은 없지만, 일반적으로 다음과 같이 이해하는 것이 안전하다. 
* Fatal - 시스템이 스스로를 보호하기 위해 강제중단을 할 정도의 심각한 문제 발생
* Error - 시스템에 즉각적인 큰 피해는 없지만, 제대로 동작하지 못하게 하는 중대한 문제 발생
* Warn - 예상과 다르거나 이상한 동작이 발견되었으나, 운영 자체에는 큰 지장을 주지 않는 경고성 메시지
* Info - 시스템이 정상적으로 동작하고 있다는 상태 정보 및 이벤트 소식 (참고용)
* Debug - 시스템이 어떻게 동작하는지 단계별로 자세한 실행 과정을 보여 주는 상세 메시지(주로 개발자용)

기본 설정된 로그 표시수준은 Info이다. 기본 수준과 그보다 더 심각한 메시지들만 볼 수 있다. 보통은 Debug 메시지만 보이지 않는다. Debug가 Info보다 덜 심각한 유일한 레벨이기 때문이다. 예를 들어 기본 수준을 Warn으로 설정하면, Warn, Error, Fatal 메시지만 보이고, Info, Debug는 보이지 않는다.   
#### 3.1. Set the default logger level
/turtlesim노드를 처음 실행할 때, 로그 표시 수준을 설정할 수 있다. 아래의 명령어를 터미널에 입력한다.    
```
$ros2 run turtlesim turtlesim_node --ros-args --log-level WARN
```
이렇게 실행하면, 이전에 /turtlesim을 실행할 때 콘솔에 뜨던 기본 Info 로그 메시지가 더 이상 보이지 않는다. 이는 Info 메시지가 새로 설정한 기본 로그 수준인 Warn보다 중요도가 낮아서 출력되지 않은 것이다. 
<img width="924" height="189" alt="image" src="https://github.com/user-attachments/assets/b14abcfb-5daa-4e5f-8845-8d1499236b90" />      

## Summary
rqt_console은 시스템의 로그메시지를 자세히 검토할 때 매우 유용할 수 있다. 로그 메시지를 살펴보고 싶은 이유는 여러가지가 있을 수 있다. 보통은 어디서 문제가 발생했는지, 문제발생에 이르기까지 어떤 사건들이 있었는지 알아내기 위해서 사용한다.    
